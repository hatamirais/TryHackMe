# Crash Course - Pen testing

[Webiste Room](https://tryhackme.com/room/ccpentesting)



Platform:	Kali Linux

Date:		04/05/2021

Language:	Bahasa Indonesia



**Prerequisite**

Linux Bash basic operation, can be learned from link below:

[Linux Command Operation 1](https://tryhackme.com/room/linux1)

[Linux Command Operation 2](https://tryhackme.com/room/linux2)

[Linux Command Operation 3](https://tryhackme.com/room/linux3)



**Crash Course - Pen testing** (atau singkat jadi cc-pentest) akan mengenalkan penetration testing secara mudah dan singkat. Di sini kita akan belajar tentang:

- Nmap

- Netcat

- Gobuster

- Nikto

- Metasploit

- Cracking Hash

- SQL Injection

- Samba

- Basic Privilege Escalation



Dan akan menerapkan apa yang sudah kita pelajari ke dalam "Hands-on Hacking" dalam bentuk CTF.



Di sini saya hanya akan menjelaskan bagaimana menyelesaikan **Task 24**, semua pertanyaan selain **Task 24** dapat di selesaikan dengan memeriksa `man` atau `-h` di setiap program.



## user.txt



Scan IP dengan menggunakan Nmap, dan kita akan menemukan informasi berupa:

```

22/tcp open  ssh     OpenSSH 7.2p2 Ubuntu 4ubuntu2.8 (Ubuntu Linux; protocol 2.0)

| ssh-hostkey: 

|   2048 12:96:a6:1e:81:73:ae:17:4c:e1:7c:63:78:3c:71:1c (RSA)

|   256 6d:9c:f2:07:11:d2:aa:19:99:90:bb:ec:6b:a1:53:77 (ECDSA)

|_  256 0e:a5:fa:ce:f2:ad:e6:fa:99:f3:92:5f:87:bb:ba:f4 (ED25519)

80/tcp open  http    Apache httpd 2.4.18 ((Ubuntu))

|_http-server-header: Apache/2.4.18 (Ubuntu)

|_http-title: Apache2 Ubuntu Default Page: It works

Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel

```

<picture cc_pentest_nmap_result>



Dengan melakukan `curl` ke IP yang di beri, kita tahu bahwa IP merupakan website yang valid (tanpa harus membuka browser), karena itu kita bisa gunakan Gobuster untuk memeriksa apa saja yang ada di webiste dengan menggunakan wordlist `wordlists/dirb/common.txt`.



Perlu di perhatikan bahwa saat menggunakan gobuster, kita tidak hanya fokus ke bagian di directory, tapi fokus juga ke bagian status, [link](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status) ini akan menjelasjkan anda apa arti kode status yang anda lihat di gobuster.



Jika scan anda berhasil, anda akan menemukan `(Status :301)`, yang berarti redirect ke link baru. Lakukan scan ulang dengan menambahkan directory dan juga menambahkan extensi yang di perlukan, karena di soal meminta `user.txt` jadi bisa tambahkan ekstensi `.txt` ke dalam command. Command bisa menjadi seperti `gobuster dir -w /lokasi_worldlist -u IP/301_directory -x .txt`



<picture cc_pentest_gobuster_result>



Dengan hasil di atas, kita bisa login melalui SSH dengan kredensial yang di dapat dan akan menemukan `user.txt`



> user:password. Password masih dalam bentuk hash.



## root.txt



`root.txt` tidak ada di directory user yang kita temukan. Karena itu kita harus mencari `root.txt` dari semua folder yang ada di sistem. `cd` ke Root directory dan jalankan command `find . -name root.txt`. Anda akan mendapat pesan `Permission denied`, yang berarti username yang kita dapat memiliki "limit" tentang apa saja yang bisa dilakukan. Karena itu `Privilege Escalation` atau PE di perlukan agar kita bisa mengakses komputer secara `root`.



Ada banyak cara yang bisa di lakukan untuk PE, salah satunya dengan menggunakan automated tool seperti [linpeas](https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite/tree/master/linPEAS) yang bisa membantu kita untuk mencari apa yang bisa kita eksploit. 



Di sini saya akan menggunakan `linpeas` untuk menemukan celah yang bisa di gunakan.



Di komputer linux kita, lakukan:

- Download `linpeas` di [sini](https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite/tree/master/linPEAS)

- Jalankan command `scp linpeas.sh USER_FOUND@IP:/home/USER_FOUND` di directory dimana anda simpan `linpeas`



Di komputer target, lakukan:

- Ganti directory kembali ke home dengan `cd ~`

- Jika command `scp` berhasil maka anda harusnya menemukan `linpeas.sh`

- Ubah mode linpeas.sh menjadi executable dengan `chmod +x linpeas.sh`

- Jalankan `linpeas` dengan command `./linpeas.sh`



Anda akan menemukan line yang berisi:



<picture cc_pentest_linpeas_result>

```bash

User USER may run the following commands on ubuntu:

    (root) NOPASSWD: /bin/su

```

Infromasi ini berarti username yang kita dapatkan bisa menjalan command `/bin/su` dengan `sudo` tanpa menggunakan password. 



Apa artinya? Kita bisa menjalankan `su` yang secara default jika kita jalankan di terminal linux kita berarti switch user ke root. Dalam artian kita bisa melakukan mengakses root tanpa menggunakan passwordnya root.



Dengan informasi di atas, anda bisa menjalankan command `sudo /bin/su` dan bisa mengakses komputer secara root.



Karena anda sekarang sudah menjadi root, anda sekarang bisa menjalankan command `find . -name root.txt` di Root directory. `root.txt` ada di directory `root`.



<picture cc_pentest_root_txt>



**Kesimpulan**



CC-Pentest hanya bertujuan untuk mengenalkan pemula apa saja yang bisa terjadi saat melakukan Penetration Testing. Jika CC-Pentesting belum cukup, anda bisa periksa [Basic Pentesting](https://tryhackme.com/room/basicpentestingjt).

Worth mentioning, pada pengerjaan `root.txt` anda sebenarnya tidak perlu menjalankan `linpeas`. Anda bisa saja menjalankan command `sudo -l` untuk mendapatkan hasil yang sama. Alasan di gunakannya `linpeas` adalah selain mengotomatiskan proses PE, anda juga tahu bagaimana menggunakan `linpeas` kedepannya. 

Di sini saya hanya sharing apa yang sudah saya pelajari dari CC-Pentesting dan tujuan dari post ini adalah sebagai pengingat saya untuk masa depan dan agar kita bisa belajar bersama. 

Terima Kasih